# 计客超级密码机 APP 开发发布计划

> 文档版本: 1.0
> 创建日期: 2026-01-27
> 基于: [架构设计文档](./2026-01-27-architecture-design.md)

---

## 1. 版本规划总览

```
┌─────────────────────────────────────────────────────────────────────┐
│                         版本发布路线图                               │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  Phase 1        Phase 2        Phase 3        Phase 4              │
│  ─────────      ─────────      ─────────      ─────────            │
│                                                                     │
│  ┌─────────┐   ┌─────────┐   ┌─────────┐   ┌─────────┐            │
│  │  MVP    │   │  V1.0   │   │  V1.5   │   │  V2.0   │            │
│  │ 核心可玩 │ → │ 完整功能 │ → │ 体验优化 │ → │ 社交扩展 │            │
│  └─────────┘   └─────────┘   └─────────┘   └─────────┘            │
│                                                                     │
│  • 基础游戏     • 600关卡      • 成就系统     • 在线对战            │
│  • 初级50关     • 双人对战      • 数据统计     • 排行榜              │
│  • 关卡选择     • 音效系统      • UI动画       • 社交分享            │
│  • 星级评定     • 设置页面      • 色盲模式     • 每日挑战            │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

---

## 2. Phase 1: MVP（核心可玩版本）

### 2.1 目标
- 实现核心游戏机制，验证玩法可行性
- 初级模式 50 关可完整游玩
- 基础 UI 可用，无需精美

### 2.2 功能范围

| 功能模块 | 包含内容 | 优先级 |
|---------|---------|-------|
| 游戏核心 | 密码验证、猜测提交、胜负判定 | P0 |
| 关卡系统 | 初级50关、关卡解锁、星级评定 | P0 |
| 页面导航 | 主页、关卡选择、游戏页、结果页 | P0 |
| 数据持久化 | 关卡进度、星级保存 | P0 |
| 基础组件 | 颜色槽、颜色选择器、猜测行 | P0 |

### 2.3 任务分解

#### Sprint 1: 项目基础搭建
```
任务 1.1: 创建目录结构
├── 创建 pages/ 目录及页面文件骨架
├── 创建 components/ 目录及组件文件骨架
├── 创建 services/ 目录及服务文件骨架
├── 创建 repositories/ 目录及仓库文件骨架
├── 创建 models/ 目录及模型定义
├── 创建 constants/ 目录及常量文件
└── 创建 utils/ 目录及工具文件

任务 1.2: 配置路由
├── 更新 main_pages.json
├── 实现 Routes.ets 常量
└── 实现 Navigator.ets 导航封装

任务 1.3: 实现数据模型
├── Color.ets - 颜色类型与色值
├── Level.ets - 关卡模型
├── Attempt.ets - 猜测记录
├── GameState.ets - 游戏状态
├── UserProgress.ets - 用户进度
└── RouteParams.ets - 路由参数
```

#### Sprint 2: 核心游戏逻辑
```
任务 2.1: GameService 实现
├── evaluateGuess() - 密码验证算法
├── checkGameEnd() - 游戏结束判定
├── calculateStars() - 星级计算
└── 单元测试

任务 2.2: LevelRepository 实现
├── 预设50关密码数据
├── getPassword() - 获取关卡密码
├── getLevelConfig() - 获取关卡配置
└── 单元测试

任务 2.3: UserRepository 实现
├── Preferences 初始化
├── getProgress() / saveProgress()
├── getLevelStars() / saveLevelStars()
└── 单元测试

任务 2.4: LevelService 实现
├── getLevel() - 获取关卡
├── unlockNextLevel() - 解锁下一关
├── updateLevelStars() - 更新星级
└── 集成测试
```

#### Sprint 3: 基础 UI 组件
```
任务 3.1: ColorSlot 组件
├── 圆形色块渲染
├── 空状态显示
├── 选中状态高亮
├── 点击事件处理
└── 禁用状态（历史记录）

任务 3.2: ColorPicker 组件
├── 横向颜色按钮排列
├── 颜色选择回调
└── 禁用状态

任务 3.3: GuessRow 组件
├── 4个 ColorSlot 排列
├── HintIndicator 集成
└── 行号显示

任务 3.4: HintIndicator 组件
├── mapped 模式渲染（位置对应）
├── unmapped 模式渲染（紧凑排列）
└── 黑点/白点样式

任务 3.5: StarRating 组件
├── 星星图标渲染
├── 支持 0-3 星显示
└── 可配置大小

任务 3.6: LevelCard 组件
├── 关卡号显示
├── 星级显示
├── 锁定/解锁状态
└── 点击事件
```

#### Sprint 4: 页面开发
```
任务 4.1: HomePage 主页
├── 应用标题/Logo
├── "单人闯关" 按钮（跳转难度选择）
├── 简单布局即可
└── 集成导航

任务 4.2: LevelSelectPage 关卡选择页
├── 接收 difficulty 参数
├── Grid 布局显示关卡卡片
├── 已解锁/锁定状态
├── 星级显示
├── 点击进入游戏
└── 返回按钮

任务 4.3: GamePage 游戏页（核心）
├── LocalStorage 初始化游戏状态
├── 顶部信息栏（关卡、剩余次数）
├── 猜测历史列表 (AttemptList)
├── 当前输入行 (CurrentGuessRow)
├── 颜色选择器 (ColorPicker)
├── 操作按钮（确认、重置）
├── 游戏逻辑集成
├── 胜负判定与跳转
└── 返回确认对话框

任务 4.4: ResultPage 结果页
├── 接收结果参数
├── 显示胜利/失败状态
├── 显示使用次数、星级
├── "下一关" 按钮（胜利时）
├── "重试" 按钮
├── "返回主页" 按钮
└── 星级动画（简单版）
```

#### Sprint 5: 集成与测试
```
任务 5.1: EntryAbility 集成
├── Repository 初始化
├── PersistentStorage 配置
└── 加载 HomePage

任务 5.2: 端到端测试
├── 完整游戏流程测试
├── 关卡解锁测试
├── 数据持久化测试
└── 边界情况测试

任务 5.3: Bug 修复与优化
├── 修复发现的问题
├── 基础性能优化
└── 代码清理
```

### 2.4 MVP 交付物

- [ ] 可运行的 HarmonyOS APP
- [ ] 初级模式 50 关可玩
- [ ] 关卡进度自动保存
- [ ] 星级评定系统
- [ ] 基础 UI（功能完整，样式简单）

---

## 3. Phase 2: V1.0（完整功能版本）

### 3.1 目标
- 完整 600 关卡内容
- 双人对战模式
- 音效系统
- 设置页面

### 3.2 功能范围

| 功能模块 | 包含内容 | 优先级 |
|---------|---------|-------|
| 高级关卡 | 高级模式500关、颜色递增、unmapped提示 | P0 |
| 双人对战 | 出题、破译、轮换、胜负判定 | P1 |
| 自由练习 | 自定义颜色数、无限练习 | P1 |
| 音效系统 | 开机音、点击音、胜利/失败音 | P1 |
| 设置页面 | 音效开关、振动开关、主题切换 | P1 |
| 提示系统 | 具象提示、抽象提示 | P2 |

### 3.3 任务分解

#### Sprint 6: 高级关卡扩展
```
任务 6.1: 扩展 LevelRepository
├── 高级模式 500 关密码数据
├── 颜色数量递增逻辑 (4→5→6)
└── unmapped 提示模式支持

任务 6.2: 更新 LevelSelectPage
├── 难度选择 Tab（初级/高级）
├── 分页或滚动加载（500关）
└── 进度统计显示

任务 6.3: 更新 GamePage
├── 支持 5-6 种颜色
├── unmapped 提示渲染
└── 高级模式 UI 调整

任务 6.4: 测试高级关卡
├── 关卡 101-500 测试
├── 颜色递增测试
└── 性能测试（大量关卡）
```

#### Sprint 7: 双人对战模式
```
任务 7.1: DuelSetupPage 实现
├── 出题者设置密码 UI
├── 密码隐藏输入
├── 时间限制设置（可选）
├── "开始挑战" 按钮
└── 参数传递到 GamePage

任务 7.2: GamePage 双人模式适配
├── 识别 mode='duel' 参数
├── 使用传入的密码
├── 计时器显示（如有时间限制）
└── 结果传递

任务 7.3: ResultPage 双人模式适配
├── 显示破译结果
├── "交换角色" 按钮
├── 多轮对战记分
└── 最终胜负判定

任务 7.4: 双人模式测试
├── 完整对战流程
├── 角色轮换
└── 边界情况
```

#### Sprint 8: 自由练习模式
```
任务 8.1: PracticePage 实现
├── 颜色数量选择 (4/5/6)
├── 提示模式选择 (mapped/unmapped)
├── "开始练习" 按钮
└── 参数传递

任务 8.2: GamePage 练习模式适配
├── 识别 mode='practice' 参数
├── 随机生成密码
├── 无关卡限制
└── 可重复练习

任务 8.3: 更新 HomePage
├── 添加 "双人对战" 入口
├── 添加 "自由练习" 入口
└── 布局调整
```

#### Sprint 9: 音效系统
```
任务 9.1: AudioService 实现
├── AVPlayer 封装
├── 音效预加载机制
├── play(soundType) 接口
├── setMuted() 静音控制
└── 单例模式

任务 9.2: 音效资源准备
├── morse.mp3 - 开机摩斯电码
├── click.mp3 - 点击反馈
├── submit.mp3 - 提交验证
├── hit.mp3 - 猜中提示
├── win.mp3 - 胜利音乐
├── lose.mp3 - 失败提示
└── 放置到 rawfile/audio/

任务 9.3: 音效集成
├── EntryAbility 预加载
├── 开机播放 morse
├── ColorSlot 点击播放 click
├── 提交播放 submit
├── 结果页播放 win/lose
└── 静音状态检查

任务 9.4: 音效测试
├── 各场景音效播放
├── 静音功能
└── 内存/性能影响
```

#### Sprint 10: 设置页面
```
任务 10.1: AppSettings 模型完善
├── soundEnabled: boolean
├── vibrationEnabled: boolean
├── theme: 'light'|'dark'|'system'
└── 默认值定义

任务 10.2: SettingsPage 实现
├── 音效开关 Toggle
├── 振动开关 Toggle
├── 主题选择 Radio
├── 关于/版本信息
├── AppStorage 绑定
└── 设置即时生效

任务 10.3: 主题支持
├── 浅色主题样式
├── 深色主题样式
├── 跟随系统设置
└── 全局样式变量

任务 10.4: 更新 HomePage
├── 添加 "设置" 入口
└── 设置图标
```

#### Sprint 11: 提示系统
```
任务 11.1: HintService 实现
├── getConcreteHint() - 具象提示
├── getAbstractHint() - 抽象提示
├── 提示生成算法
└── 单元测试

任务 11.2: GamePage 提示集成
├── "提示" 按钮
├── 提示弹窗显示
├── hintsUsed 计数
├── 提示影响星级
└── 提示次数限制（可选）

任务 11.3: 提示测试
├── 具象提示准确性
├── 抽象提示可读性
└── 星级影响验证
```

#### Sprint 12: V1.0 集成测试与发布准备
```
任务 12.1: 全量功能测试
├── 初级模式 100 关
├── 高级模式 500 关
├── 双人对战完整流程
├── 自由练习
├── 设置功能
└── 音效系统

任务 12.2: 性能优化
├── 启动时间优化
├── 页面切换流畅度
├── 内存占用检查
└── 电量消耗评估

任务 12.3: UI 打磨
├── 统一视觉风格
├── 间距/字体调整
├── 图标资源优化
└── 动画流畅度

任务 12.4: 发布准备
├── 应用图标制作
├── 应用描述撰写
├── 截图准备
├── 签名配置
└── 构建 release 包
```

### 3.4 V1.0 交付物

- [ ] 完整 600 关卡
- [ ] 双人本地对战
- [ ] 自由练习模式
- [ ] 音效系统
- [ ] 设置页面（音效、主题）
- [ ] 提示系统
- [ ] 可发布的 release 包

---

## 4. Phase 3: V1.5（体验优化版本）

### 4.1 目标
- 成就系统增加游戏粘性
- 数据统计展示玩家成长
- UI 动画提升体验
- 可访问性支持

### 4.2 功能范围

| 功能模块 | 包含内容 | 优先级 |
|---------|---------|-------|
| 成就系统 | 成就定义、解锁条件、通知、展示页 | P1 |
| 数据统计 | 游戏次数、胜率、用时、关卡分布 | P1 |
| UI 动画 | 天线动画、星星飞入、关卡解锁 | P2 |
| 色盲模式 | 颜色+图形区分、高对比度 | P2 |
| 新手引导 | 首次游戏教程、规则说明 | P2 |

### 4.3 任务分解

#### Sprint 13: 成就系统
```
任务 13.1: Achievement 模型设计
├── id, name, description
├── condition 解锁条件
├── icon 图标
├── unlockedAt 解锁时间
└── 成就类型分类

任务 13.2: 成就定义
├── 首次通关
├── 连续通关 (5/10/20)
├── 三星通关数 (10/50/100)
├── 高级模式解锁
├── 一次猜中
├── 完美破译（1-3次）
└── 总游戏次数里程碑

任务 13.3: AchievementService 实现
├── checkAchievements() - 检查解锁
├── unlockAchievement() - 解锁成就
├── getUnlockedAchievements()
└── 触发时机集成

任务 13.4: 成就 UI
├── 成就解锁通知 Toast
├── AchievementPage 成就列表
├── 已解锁/未解锁状态
└── HomePage 入口
```

#### Sprint 14: 数据统计
```
任务 14.1: 统计数据模型
├── 总游戏次数
├── 总胜利次数/胜率
├── 各难度完成数
├── 总星数/三星数
├── 平均用时
├── 最佳连胜
└── 游戏时长

任务 14.2: 统计数据收集
├── 游戏结束时更新统计
├── 统计数据持久化
└── 数据聚合计算

任务 14.3: StatisticsPage 实现
├── 数据卡片展示
├── 图表可视化（可选）
├── 难度分布
└── 进度概览

任务 14.4: HomePage 统计入口
├── 添加 "统计" 按钮
└── 简要统计预览
```

#### Sprint 15: UI 动画优化
```
任务 15.1: AntennaAnimation 组件
├── 天线拉出动画
├── 信号灯闪烁
├── 摩斯电码节奏
└── HomePage 集成

任务 15.2: 星星动画
├── ResultPage 星星飞入
├── 逐个点亮效果
├── 三星特效
└── 动画库选择

任务 15.3: 关卡解锁动画
├── 锁打开效果
├── 新关卡高亮
└── 过渡动画

任务 15.4: 交互反馈动画
├── ColorSlot 点击缩放
├── 按钮按下效果
├── 页面转场动画
└── 加载状态动画
```

#### Sprint 16: 可访问性
```
任务 16.1: 色盲模式
├── 颜色+图形双重标识
├── 图形定义（圆、方、三角等）
├── 设置开关
└── 全局应用

任务 16.2: 高对比度
├── WCAG 2.1 AA 标准
├── 文字对比度检查
├── 边框/分隔线强化
└── 暗色模式适配

任务 16.3: 屏幕阅读器支持
├── accessibilityText 属性
├── 组件描述完善
└── 焦点顺序优化
```

#### Sprint 17: 新手引导
```
任务 17.1: 教程内容设计
├── 游戏规则说明
├── 操作指引
├── 提示系统说明
└── 分步引导

任务 17.2: TutorialPage 实现
├── 图文步骤展示
├── 模拟游戏演示
├── "跳过" 选项
└── 首次启动触发

任务 17.3: 引导标记
├── 首次游戏检测
├── 引导完成标记
├── 设置中重置选项
```

### 4.4 V1.5 交付物

- [ ] 成就系统 (15+ 成就)
- [ ] 数据统计页面
- [ ] UI 动画效果
- [ ] 色盲模式支持
- [ ] 新手引导教程

---

## 5. Phase 4: V2.0（社交扩展版本）

### 5.1 目标
- 在线对战增加社交互动
- 排行榜激励竞争
- 每日挑战保持活跃
- 社交分享扩大传播

### 5.2 功能范围

| 功能模块 | 包含内容 | 优先级 |
|---------|---------|-------|
| 用户系统 | 注册登录、用户资料、华为账号 | P0 |
| 在线对战 | 匹配系统、实时对战、断线重连 | P1 |
| 排行榜 | 全球榜、好友榜、每周重置 | P1 |
| 每日挑战 | 每日关卡、限时奖励 | P2 |
| 社交分享 | 成绩分享、邀请好友 | P2 |

### 5.3 任务分解（概要）

#### Sprint 18-19: 用户系统
```
├── 华为账号 SDK 集成
├── 用户资料存储（云端）
├── 登录/登出流程
├── 游客模式支持
└── 数据云同步
```

#### Sprint 20-22: 在线对战
```
├── 匹配服务器搭建
├── WebSocket 实时通信
├── 匹配算法（ELO 或简单匹配）
├── 对战房间逻辑
├── 断线重连机制
├── 作弊防护
└── 对战结果同步
```

#### Sprint 23-24: 排行榜
```
├── 排行榜服务端
├── 积分计算规则
├── 全球排行榜
├── 好友排行榜
├── 每周/每月重置
└── 排行榜 UI
```

#### Sprint 25: 每日挑战
```
├── 每日关卡生成
├── 挑战次数限制
├── 奖励机制
├── 倒计时显示
└── 历史记录
```

#### Sprint 26: 社交分享
```
├── 分享图片生成
├── 微信/微博分享
├── 邀请链接生成
├── 邀请奖励
└── 深度链接处理
```

### 5.4 V2.0 交付物

- [ ] 华为账号登录
- [ ] 在线匹配对战
- [ ] 全球/好友排行榜
- [ ] 每日挑战模式
- [ ] 社交分享功能
- [ ] 云端数据同步

---

## 6. 里程碑与时间线

```
┌─────────────────────────────────────────────────────────────────────┐
│                           开发时间线                                 │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  Sprint    1    2    3    4    5    │   MVP 完成                   │
│            ━━━━━━━━━━━━━━━━━━━━━━━━━━┿━━▶ 内部测试                  │
│                                      │                              │
│  Sprint    6    7    8    9   10   11   12   │   V1.0 完成          │
│            ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┿━━▶ 应用商店发布      │
│                                               │                     │
│  Sprint   13   14   15   16   17   │   V1.5 完成                   │
│            ━━━━━━━━━━━━━━━━━━━━━━━━━┿━━▶ 版本更新                   │
│                                     │                               │
│  Sprint   18   19   20   21   22   23   24   25   26   │   V2.0    │
│            ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┿━━▶ 社交版  │
│                                                         │           │
└─────────────────────────────────────────────────────────────────────┘
```

### 6.1 关键里程碑

| 里程碑 | Sprint | 目标 | 验收标准 |
|-------|--------|------|---------|
| M1: 项目启动 | 0 | 环境搭建、架构确认 | 空项目可运行 |
| M2: 核心可玩 | 5 | MVP 完成 | 50关可完整游玩 |
| M3: 内部测试 | 5+ | Bug 修复 | 无阻塞性问题 |
| M4: 功能完整 | 12 | V1.0 完成 | 全功能可用 |
| M5: 商店发布 | 12+ | 首次发布 | 通过审核上架 |
| M6: 体验优化 | 17 | V1.5 完成 | 成就、统计、动画 |
| M7: 社交版本 | 26 | V2.0 完成 | 在线功能可用 |

---

## 7. 风险与应对

| 风险 | 可能性 | 影响 | 应对措施 |
|-----|-------|------|---------|
| HarmonyOS API 不熟悉 | 中 | 开发延期 | 预留学习时间，查阅官方文档 |
| 600关卡数据准备 | 低 | 内容不足 | 算法生成 + 人工筛选 |
| 性能问题（大量关卡） | 中 | 体验差 | 分页加载、虚拟列表 |
| 音效资源版权 | 低 | 法律风险 | 使用免费商用资源或自制 |
| 在线功能服务器成本 | 中 | 预算超支 | V2.0 视用户量决定 |
| 应用商店审核失败 | 中 | 发布延期 | 提前了解审核规则 |

---

## 8. 测试策略

### 8.1 测试分层

```
┌─────────────────────────────────────────────────────┐
│                    测试金字塔                        │
├─────────────────────────────────────────────────────┤
│                                                     │
│                    ┌─────┐                         │
│                    │ E2E │  端到端测试              │
│                   ┌┴─────┴┐  (手动 + 自动化)        │
│                  ┌┴───────┴┐                       │
│                 ┌┴─────────┴┐ 集成测试             │
│                ┌┴───────────┴┐ (Service + Repo)    │
│               ┌┴─────────────┴┐                    │
│              ┌┴───────────────┴┐ 单元测试          │
│             └───────────────────┘ (算法、工具)      │
│                                                     │
└─────────────────────────────────────────────────────┘
```

### 8.2 测试重点

| 层级 | 测试内容 | 工具 |
|-----|---------|-----|
| 单元测试 | PasswordValidator、StarCalculator、GameService | @ohos/hypium |
| 集成测试 | LevelService + Repository、数据持久化 | @ohos/hypium |
| UI 测试 | 组件渲染、交互响应 | 手动测试 |
| E2E 测试 | 完整游戏流程、关卡解锁 | 手动测试 |
| 性能测试 | 启动时间、内存、帧率 | DevEco Profiler |
| 兼容性测试 | 不同设备、屏幕尺寸 | 真机测试 |

---

## 9. 发布清单

### 9.1 应用商店发布准备

- [ ] 应用名称：密码破译机
- [ ] 应用图标：1024x1024 PNG
- [ ] 应用截图：5-8 张主要功能截图
- [ ] 应用描述：功能介绍、玩法说明
- [ ] 隐私政策：数据收集说明
- [ ] 版本号：1.0.0
- [ ] 签名证书：release 签名配置
- [ ] 构建产物：signed HAP/APP 包

### 9.2 发布渠道

| 渠道 | 优先级 | 说明 |
|-----|-------|------|
| 华为应用市场 | P0 | 主要渠道 |
| 荣耀应用市场 | P1 | HarmonyOS 设备 |
| 其他鸿蒙生态 | P2 | 视覆盖需求 |

---

## 10. 附录

### 10.1 相关文档

- [需求分析文档](../requirements-analysis.md)
- [架构设计文档](./2026-01-27-architecture-design.md)
- CLAUDE.md - 项目开发指南

### 10.2 资源链接

- [HarmonyOS 开发者文档](https://developer.harmonyos.com/)
- [ArkTS 语言指南](https://developer.harmonyos.com/cn/docs/documentation/doc-guides-V3/arkts-get-started-0000001504769321-V3)
- [华为应用市场上架指南](https://developer.huawei.com/consumer/cn/doc/distribution/app/agc-help-releaseapp-0000001100316672)

---

*计划版本: 1.0*
*创建日期: 2026-01-27*
