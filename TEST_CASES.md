# 密码机游戏测试用例设计

## 测试范围

### 1. 核心算法测试

#### 1.1 Mastermind 评估算法测试

**测试目标：** 验证 hits 和 pseudoHits 计算的准确性

| 用例ID | 测试场景 | 密码 | 猜测 | 预期结果 | 优先级 |
|--------|---------|------|------|----------|--------|
| ALG-001 | 全中 | red,yellow,green,blue | red,yellow,green,blue | hits=4, pseudoHits=0 | P0 |
| ALG-002 | 全错 | red,yellow,green,blue | purple,orange,purple,orange | hits=0, pseudoHits=0 | P0 |
| ALG-003 | 位置全错颜色全对 | red,yellow,green,blue | blue,green,red,yellow | hits=0, pseudoHits=4 | P0 |
| ALG-004 | 部分命中 | red,yellow,green,blue | red,orange,green,orange | hits=2, pseudoHits=0 | P0 |
| ALG-005 | 颜色对位置错 | red,yellow,green,blue | yellow,red,blue,green | hits=0, pseudoHits=4 | P0 |
| ALG-006 | 混合情况 | red,yellow,green,blue | red,green,yellow,orange | hits=1, pseudoHits=2 | P0 |
| ALG-007 | 重复颜色-密码 | red,red,green,blue | red,yellow,green,blue | hits=2, pseudoHits=1 | P1 |
| ALG-008 | 重复颜色-猜测 | red,yellow,green,blue | red,red,green,blue | hits=3, pseudoHits=0 | P1 |
| ALG-009 | 重复颜色-多个匹配 | red,red,yellow,blue | red,red,green,orange | hits=2, pseudoHits=0 | P1 |
| ALG-010 | 边界-最小颜色数(4) | red,yellow,green,blue | blue,green,yellow,red | hits=0, pseudoHits=4 | P1 |
| ALG-011 | 边界-最大颜色数(6) | red,yellow,green,blue,purple,orange(6色密码需特殊关卡) | - | - | P2 |
| ALG-012 | 空数组异常 | [] | [] | 抛出异常 | P1 |

---

### 2. 页面导航测试

#### 2.1 主页（HomePage）导航

| 用例ID | 测试场景 | 操作步骤 | 预期结果 | 优先级 |
|--------|---------|---------|----------|--------|
| NAV-001 | 启动应用 | 打开应用 | 显示主菜单，显示用户统计 | P0 |
| NAV-002 | 单人闯关-初级 | 点击"单人闯关"按钮 | 跳转到初级关卡选择页 | P0 |
| NAV-003 | 单人闯关-高级未解锁 | 高级未解锁时点击"高级挑战" | 显示锁定图标，不跳转 | P1 |
| NAV-004 | 单人闯关-高级已解锁 | 高级解锁后点击"高级挑战" | 跳转到高级关卡选择页 | P0 |
| NAV-005 | 练习模式 | 点击"练习模式" | 跳转到练习模式页 | P0 |
| NAV-006 | 双人对战 | 点击"双人对战" | 跳转到双人对战设置页 | P0 |
| NAV-007 | 设置页面 | 点击"设置"按钮 | 跳转到设置页面 | P1 |
| NAV-008 | 用户统计加载 | 首次启动应用 | 显示加载动画，加载完成显示统计数据 | P0 |

#### 2.2 关卡选择页（LevelSelectPage）导航

| 用例ID | 测试场景 | 操作步骤 | 预期结果 | 优先级 |
|--------|---------|---------|----------|--------|
| NAV-101 | 初级关卡页 | 从主页进入初级模式 | 显示1-100关，显示已解锁和星级 | P0 |
| NAV-102 | 高级关卡页 | 从主页进入高级模式 | 显示101-200关，显示已解锁和星级 | P0 |
| NAV-103 | 返回按钮 | 点击左上角"<" | 返回主页 | P0 |
| NAV-104 | 点击已解锁关卡 | 点击已解锁的关卡卡片 | 进入游戏页面 | P0 |
| NAV-105 | 点击锁定关卡 | 点击未解锁的关卡 | 不进入游戏，显示锁定状态 | P1 |
| NAV-106 | 滚动查看关卡 | 滚动关卡列表 | 平滑滚动，显示更多关卡 | P1 |
| NAV-107 | 关卡进度显示 | 查看进度信息 | 显示"已解锁: X/100"和"通关进度: X%" | P0 |

#### 2.3 游戏页（GamePage）导航

| 用例ID | 测试场景 | 操作步骤 | 预期结果 | 优先级 |
|--------|---------|---------|----------|--------|
| NAV-201 | 正常进入游戏 | 从关卡选择页进入 | 显示游戏界面，显示关卡号和剩余次数 | P0 |
| NAV-202 | 练习模式进入 | 从练习模式进入 | 显示游戏界面，无限次数 | P0 |
| NAV-203 | 返回按钮 | 点击左上角"✕" | 返回上一页（不保存进度） | P0 |
| NAV-204 | 游戏结束-胜利 | 猜中密码 | 跳转到结果页，显示胜利 | P0 |
| NAV-205 | 游戏结束-失败 | 次数用完未猜中 | 跳转到结果页，显示失败 | P0 |

#### 2.4 结果页（ResultPage）导航

| 用例ID | 测试场景 | 操作步骤 | 预期结果 | 优先级 |
|--------|---------|---------|----------|--------|
| NAV-301 | 胜利结果页 | 游戏胜利后进入 | 显示胜利信息、星级评价、正确密码 | P0 |
| NAV-302 | 失败结果页 | 游戏失败后进入 | 显示失败信息、正确密码、重试按钮 | P0 |
| NAV-303 | 返回主页 | 点击"返回主页" | 返回主页，统计数据更新 | P0 |
| NAV-304 | 下一关-胜利 | 胜利后点击"下一关" | 进入下一关（解锁则进入，锁定则提示） | P0 |
| NAV-305 | 重试-失败 | 失败后点击"重试" | 重新开始当前关卡 | P0 |
| NAV-306 | 查看详情 | 点击结果卡片 | 显示详细的游戏信息（用时、尝试次数等） | P1 |

---

### 3. 游戏核心玩法测试

#### 3.1 颜色选择与输入

| 用例ID | 测试场景 | 操作步骤 | 预期结果 | 优先级 |
|--------|---------|---------|----------|--------|
| GAME-001 | 选择颜色填充 | 点击颜色选择器中的颜色 | 当前槽位显示选中颜色，自动跳到下一槽位 | P0 |
| GAME-002 | 连续填充 | 依次选择4个颜色 | 4个槽位全部填充，确认按钮可点击 | P0 |
| GAME-003 | 清空输入 | 点击"清空"按钮 | 所有槽位清空，回到第一个槽位 | P0 |
| GAME-004 | 替换颜色 | 点击已有颜色的槽位，选择新颜色 | 该槽位颜色更新 | P0 |
| GAME-005 | 槽位指示器 | 查看底部圆点 | 显示当前选中槽位（蓝色） | P1 |
| GAME-006 | 颜色数量4色 | 4色关卡 | 颜色选择器显示4个颜色 | P0 |
| GAME-007 | 颜色数量5色 | 5色关卡 | 颜色选择器显示5个颜色 | P1 |
| GAME-008 | 颜色数量6色 | 6色关卡 | 颜色选择器显示6个颜色 | P1 |

#### 3.2 提交猜测

| 用例ID | 测试场景 | 操作步骤 | 预期结果 | 优先级 |
|--------|---------|---------|----------|--------|
| GAME-101 | 提交完整猜测 | 填充4个颜色，点击"确认" | 猜测记录显示，提示点显示，次数减1 | P0 |
| GAME-102 | 提交不完整猜测 | 填充<4个颜色，点击"确认" | 按钮不可点击，无反应 | P0 |
| GAME-103 | 猜中密码 | 提交正确密码 | 游戏结束，跳转到胜利页 | P0 |
| GAME-104 | 用完次数 | 达到最大次数未猜中 | 游戏结束，跳转到失败页 | P0 |
| GAME-105 | 历史记录显示 | 多次猜测 | 历史记录按顺序显示，最新在最下 | P0 |
| GAME-106 | 剩余次数更新 | 每次猜测后 | 顶部"剩余次数"实时更新 | P0 |

#### 3.3 提示显示

| 用例ID | 测试场景 | 密码 | 猜测 | 预期提示 | 优先级 |
|--------|---------|------|------|----------|--------|
| HINT-001 | 全黑提示 | RYGB | RYGB | 4绿0黄0灰 | P0 |
| HINT-002 | 全黄提示 | RYGB | BGRY | 0绿4黄0灰 | P0 |
| HINT-003 | 全灰提示 | RYGB | POPO | 0绿0黄4灰 | P0 |
| HINT-004 | 混合提示1 | RYGB | RYPO | 2绿0黄2灰 | P0 |
| HINT-005 | 混合提示2 | RYGB | RGYB | 2绿2黄0灰 | P0 |
| HINT-006 | 混合提示3 | RYGB | YRGB | 0绿4黄0灰 | P0 |
| HINT-007 | 提示点顺序 | - | - | 绿色在前，黄色在后 | P1 |

---

### 4. 星级评定测试

| 用例ID | 测试场景 | 尝试次数/最大次数 | 预期星级 | 优先级 |
|--------|---------|------------------|---------|--------|
| STAR-001 | 3星-优秀 | ≤30% (3/10) | ⭐⭐⭐ | P0 |
| STAR-002 | 2星-良好 | ≤60% (6/10) | ⭐⭐ | P0 |
| STAR-003 | 1星-及格 | >60% (7/10) | ⭐ | P0 |
| STAR-004 | 边界-3星 | 3/10 | ⭐⭐⭐ | P1 |
| STAR-005 | 边界-2星 | 6/10 | ⭐⭐ | P1 |
| STAR-006 | 边界-1星 | 7/10 | ⭐ | P1 |
| STAR-007 | 最小次数 | 1/7 | ⭐⭐⭐ | P1 |
| STAR-008 | 最大次数 | 7/7 | ⭐ | P1 |
| STAR-009 | 星级保存 | 获得3星后重新进入 | 显示3星 | P0 |
| STAR-010 | 星级不降 | 先得1星，后得3星 | 显示3星 | P0 |

---

### 5. 关卡解锁逻辑测试

#### 5.1 初级模式解锁

| 用例ID | 测试场景 | 初始状态 | 操作 | 预期结果 | 优先级 |
|--------|---------|---------|------|----------|--------|
| UNLOCK-001 | 初级首次解锁 | easyUnlocked=1 | 通关第1关 | easyUnlocked=2 | P0 |
| UNLOCK-002 | 初级连续解锁 | easyUnlocked=5 | 通关第5关 | easyUnlocked=6 | P0 |
| UNLOCK-003 | 初级边界 | easyUnlocked=99 | 通关第99关 | easyUnlocked=100，hardUnlocked=1 | P0 |
| UNLOCK-004 | 初级通关 | easyUnlocked=100 | 通关第100关 | easyUnlocked=100，hardUnlocked=1 | P0 |
| UNLOCK-005 | 初级未解锁访问 | easyUnlocked=5 | 尝试进入第10关 | 显示锁定，无法进入 | P0 |

#### 5.2 高级模式解锁

| 用例ID | 测试场景 | 初始状态 | 操作 | 预期结果 | 优先级 |
|--------|---------|---------|------|----------|--------|
| UNLOCK-101 | 高级未解锁 | hardUnlocked=0 | 主页点击"高级挑战" | 显示锁定图标 | P0 |
| UNLOCK-102 | 高级首次解锁 | hardUnlocked=1（初级通关后） | 进入高级模式 | 显示第101关已解锁 | P0 |
| UNLOCK-103 | 高级连续解锁 | hardUnlocked=105 | 通关第105关 | hardUnlocked=106 | P0 |
| UNLOCK-104 | 高级边界 | hardUnlocked=199 | 通关第199关 | hardUnlocked=200 | P0 |
| UNLOCK-105 | 高级全部通关 | hardUnlocked=200 | 通关第200关 | hardUnlocked=200 | P0 |

---

### 6. 用户进度持久化测试

| 用例ID | 测试场景 | 操作步骤 | 预期结果 | 优先级 |
|--------|---------|---------|----------|--------|
| DATA-001 | 保存游戏进度 | 通关几关，关闭应用，重新打开 | 进度保持（解锁关卡、星级） | P0 |
| DATA-002 | 保存统计数据 | 玩几局游戏，关闭应用，重新打开 | 统计数据保持（胜场、胜率等） | P0 |
| DATA-003 | 清空数据 | 在设置中清空数据 | 所有数据重置为初始状态 | P1 |
| DATA-004 | 数据完整性 | 频繁游戏后 | 数据不损坏，无异常 | P0 |
| DATA-005 | 首次启动 | 首次安装应用 | 显示初始状态（1关已解锁） | P0 |

---

### 7. 练习模式测试

| 用例ID | 测试场景 | 操作步骤 | 预期结果 | 优先级 |
|--------|---------|---------|----------|--------|
| PRAC-001 | 进入练习模式 | 从主页进入练习模式 | 显示游戏界面，无关卡号 | P0 |
| PRAC-002 | 随机密码 | 重新开始练习 | 每次密码不同 | P0 |
| PRAC-003 | 无限次数 | 练习模式猜测 | 无次数限制，可一直玩 | P0 |
| PRAC-004 | 不记录进度 | 练习后查看关卡 | 关卡进度不变 | P0 |
| PRAC-005 | 练习颜色数 | 默认4色 | 可用颜色为4种 | P1 |

---

### 8. 双人对战模式测试

| 用例ID | 测试场景 | 操作步骤 | 预期结果 | 优先级 |
|--------|---------|---------|----------|--------|
| DUEL-001 | 进入设置页 | 从主页进入双人对战 | 显示设置页面 | P0 |
| DUEL-002 | 设置密码 | 玩家A选择4个颜色密码 | 密码显示为隐藏或问号 | P0 |
| DUEL-003 | 开始对战 | 点击"开始对战" | 切换到玩家B的猜测界面 | P0 |
| DUEL-004 | 玩家B猜测 | 玩家B提交猜测 | 显示提示（不显示正确密码） | P0 |
| DUEL-005 | 猜中密码 | 玩家B猜中 | 显示胜利，显示用時 | P0 |
| DUEL-006 | 未猜中失败 | 次数用完 | 显示失败，显示正确密码 | P0 |
| DUEL-007 | 颜色数量设置 | 设置5色模式 | 只显示5种颜色可选 | P1 |
| DUEL-008 | 时间限制 | 设置时间限制 | 显示倒计时，超时判负 | P1 |

---

### 9. UI/UX测试

#### 9.1 视觉测试

| 用例ID | 测试场景 | 检查点 | 预期结果 | 优先级 |
|--------|---------|--------|----------|--------|
| UI-001 | 颜色对比度 | 提示点颜色 | 绿色/黄色/灰色在白色背景清晰可见 | P0 |
| UI-002 | 文字可读性 | 所有页面文字 | 文字大小合适，颜色对比度高 | P0 |
| UI-003 | 按钮状态 | 确认按钮 | 不可用时置灰，可用时高亮 | P0 |
| UI-004 | 动画效果 | 页面切换、按钮点击 | 动画流畅，无卡顿 | P1 |
| UI-005 | 图标显示 | 所有图标 | 图标清晰，不模糊 | P1 |

#### 9.2 响应式测试

| 用例ID | 测试场景 | 设备/方向 | 预期结果 | 优先级 |
|--------|---------|-----------|----------|--------|
| UI-101 | 不同屏幕尺寸 | 不同手机 | 界面适配良好，无溢出 | P0 |
| UI-102 | 横屏模式 | 旋转设备 | 界面自适应或保持竖屏 | P2 |

---

### 10. 边界和异常测试

| 用例ID | 测试场景 | 操作 | 预期结果 | 优先级 |
|--------|---------|------|----------|--------|
| EDGE-001 | 快速点击 | 快速重复点击按钮 | 只响应一次，无异常 | P1 |
| EDGE-002 | 网络断开 | 断网后使用 | 本地功能正常 | P2 |
| EDGE-003 | 内存不足 | 后台运行多应用 | 不崩溃，可能警告 | P1 |
| EDGE-004 | 应用切换 | 游戏中切换到其他应用 | 返回后游戏状态保持 | P0 |
| EDGE-005 | 长时间闲置 | 游戏中长时间不操作 | 不崩溃，返回后可继续 | P1 |
| EDGE-006 | 重复进入关卡 | 快速重复点击关卡 | 只进入一次 | P1 |
| EDGE-007 | 乱序猜测 | 随机乱填颜色 | 正确计算提示 | P0 |

---

### 11. 性能测试

| 用例ID | 测试场景 | 指标 | 预期 | 优先级 |
|--------|---------|------|------|--------|
| PERF-001 | 启动时间 | 冷启动时间 | <2秒 | P0 |
| PERF-002 | 页面切换 | 页面跳转响应时间 | <500ms | P0 |
| PERF-003 | 提交猜测 | 提交后显示结果时间 | <300ms | P0 |
| PERF-004 | 内存占用 | 运行时内存 | <200MB | P1 |
| PERF-005 | 帧率 | 动画流畅度 | ≥60fps | P1 |
| PERF-006 | 数据加载 | 加载大量关卡进度 | <1秒 | P1 |

---

### 12. 兼容性测试

| 用例ID | 测试场景 | 设备型号 | HarmonyOS版本 | 预期结果 | 优先级 |
|--------|---------|---------|---------------|----------|--------|
| COMP-001 | 主流机型 | Mate 60 | 4.x | 正常运行 | P0 |
| COMP-002 | 新机型 | Mate 70 | 5.x/6.x | 正常运行 | P0 |
| COMP-003 | 不同分辨率 | 各手机 | - | 界面适配 | P0 |

---

## 测试执行计划

### 阶段一：冒烟测试（Smoke Testing）
**优先级：** P0
**用例数：** ~40
**目标：** 验证核心功能可用，阻断性缺陷

### 阶段二：功能测试
**优先级：** P0 + P1
**用例数：** ~120
**目标：** 全面覆盖功能点

### 阶段三：回归测试
每次发布前执行 P0 用例

### 阶段四：探索性测试
测试人员自由探索，发现意外问题

---

## 缺陷分级标准

| 级别 | 描述 | 示例 |
|------|------|------|
| Critical | 阻断性缺陷，无法继续测试 | 应用崩溃、无法启动、数据丢失 |
| High | 严重影响功能，但有workaround | 算法错误、无法进入某个页面 |
| Medium | 功能可用但有明显问题 | UI错位、提示不准确 |
| Low | 轻微问题，不影响使用 | 文字错误、颜色不美观 |

---

## 测试数据准备

### 关卡数据
- 初级关卡：1-100关（4色为主）
- 高级关卡：101-200关（5-6色）

### 测试账号
- 新用户（首次使用）
- 进阶用户（已通关部分关卡）
- 高级用户（已通关所有关卡）

---

## 重点关注点

1. **算法正确性**：Mastermind算法是核心，必须100%准确
2. **数据持久化**：用户进度不能丢失
3. **提示显示**：用户通过提示推理，必须准确
4. **解锁逻辑**：关卡解锁流程要正确
5. **星级评定**：影响用户成就感，要公平

---

## 建议的测试顺序

1. 先测算法（ALG系列）
2. 再测核心玩法（GAME系列）
3. 然后测导航（NAV系列）
4. 最后测边界和性能

---

## 自动化测试建议

**可自动化用例：**
- ALG-001 ~ ALG-012（算法测试）
- NAV-001 ~ NAV-008（基本导航）
- GAME-001 ~ GAME-006（基本操作）

**需手工测试：**
- UI/UX测试
- 数据持久化
- 性能测试
